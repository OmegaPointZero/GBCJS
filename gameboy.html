<head>
  <title>GBCJS - The JavaScript GameBoy Color Emulator</title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script> <!-- load jQuery -->
 <script src="js/main.js"></script> <!-- load main.js -->
 <script src="js/mm.js"></script> <!-- load main.js -->
 <script src="js/cpu.js"></script> <!-- load main.js -->
</head>
<body>
  <div class="gameSelector"> 
    Upload your ROM here: 
    <input type="file" id="ROMUpload" />
  </div>
  <div class="main-body">
    <canvas id="screen" width="160" height="144"></canvas>
  </div>
  <div class="debuggingInfo">
    Debugging info goes here
  </div>

    <script>
$('document').ready(function(){

   const take_byte = (function(byte){
        b = ("0" + byte.toString(16))
        return b.slice(-2)
    })
  
    const readFile = (function(file){
        var myFiles = $('#ROMUpload').prop('files');
        var myFile = myFiles[0]
        console.log(myFile)
        const fr = new FileReader();
        fr.onload = function(){
            MM.load(fr)
        }

        fr.readAsArrayBuffer(myFile)
        var infoStr = "<p>"
        infoStr += "Game Loaded: " + myFile.name
        infoStr += "</p><p>File Size: " + myFile.size +" bytes</p>"
        $('.debuggingInfo').html(infoStr)
        
      })  

      document.getElementById('ROMUpload').addEventListener('change', readFile, false);
    });
    </script>
</body>
